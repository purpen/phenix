{%extends 'layout/column.html'%}
{% block title %}十万火计-{% endblock %}
{% block page_css %}
<style type="text/css">
	body{background:#fff;}
	.match.page .ui.header{
		font-weight:400;
	}
	.match.page .ui.logo{
		margin:1em auto;	
	}
	.match.page > .ui.nav{
		border-bottom: 1px solid #e4e5e7;
	}
	.ui.nav .ui.main-nav .item{
		padding-left: 1em;
		padding-right: 1em;
		border-bottom: 2px solid #e4e5e7;
		margin: 0;
		font-weight: 700;
		opacity: .9;
		padding-bottom: 1rem;
		margin-bottom: -3.7rem;
	}
	/*.ui.nav .column{
		margin-top:.5em;
		margin-bottom:.5em;
	}*/
	.ui.nav {
		border-top: 1px solid #e4e5e7;
		border-bottom: 1px solid #e4e5e7;
		background:#091f35;
	}
	.ui.divided.horizontal.list>.item{
		color:#fff;
	}
	.ui.active.link{
		color:#f36 !important;
	}
	.ui.divided.horizontal.list .ui.item:hover{
		color:#f36 ;
	}
	
	#frslide {
		max-height: 400px;
		position: relative;
	}
	#frslide > .ui.slide {
		height: 100%;
		width: 100%;
	}
	#frslide > .ui.slide > .item {
		display: inline-block;
		max-width: 100%;
		float: left;
	}
	#frslide .pages {
		bottom: 1em;
	    margin: 0 auto;
	    position: absolute;
	    width: 100%;
		text-align: center;
	}
	#frslide .pages > a {
		background-color: rgba(255,255,255,0.35);
	    border-radius: 2em;
	    display: inline-block;
	    height: 0.65em;
	    margin-right: 0.65em;
	    text-indent: -999em;
	    width: 0.65em;
	}
	#frslide .pages > a.active,
	#frslide .pages > a:hover {
		background-color: rgba(255,255,255,0.75);
	}
	
	.idea.section-title {
		margin-bottom: 1.5em;
	}
	.idea.section-title h3,
	.idea.section-title p {
		margin-bottom: 0.5rem;
	}
	.idea.section-title p {
		margin-top: 0.5rem;
	}
	.idea.section-title hr {
		width: 80px;
		background-color: #ff3366;
	}
	
	.match.page .ui.pagination {
		margin-top: 1.5rem;
	}
	
	.match.page .ui.allist .ui.items > .item{
		box-shadow: 0 0px 0 0 rgba(0,0,0,.2) inset;
		background-color: #fff;
		border-radius: 0.3125em;
		min-height:320px;
		border: 1px solid rgba(0,0,0,0.1);
	}
	.ui.allist .ui.items>.item:hover{
		border-bottom: 1px solid rgba(0,0,0,0.1) !important;
	}
	.ui.sort.grid > .row {
		margin-bottom: 2%;
	}
	.ui.allist .ui.four.items .item .content{
		padding-top:1.75em;
	}
	.ui.allist .ui.four.items .item .ui.dividing .image{
		background-color: rgba(0,0,0,0);
		border-radius: 0;
		position: relative;
		display: block;
		box-sizing: border-box;
		margin: 12px auto;
		max-height: 100%;
		overflow: hidden;
	}
	.ui.allist .ui.four.items .item .ui.dividing .image img{
		width:100%;
	}
	.ui.allist .ui.four.items .item .ui.dividing.header{
		border-bottom: 1px solid rgba(0,0,0,0); 
		overflow: hidden;
		margin-bottom: 54px;
		height: 330px;
	}
	.ui.allist .ui.four.items .item .i-stats .schedule{
		border-top: 1px solid rgba(0,0,0,.1);
	}
	.ui.allist .ui.four.items .item .i-stats .schedule .status{
		max-height: 30px;
	}
	.ui.allist .ui.items .item .full.advantage {
		display: block;
		box-sizing: border-box;
		overflow: hidden;
		margin-top: 0.8em;
	}
	.ui.allist .ui.items .item .like {
		font-size: 0.875em;
	}
	.i-stats {
		position: absolute;
		bottom: 10px;
		left: 10px;
		right: 10px;
		padding-top: 45px;
		background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, #fff 26%);
	}
</style>
{% endblock %}
{% block jquery %}
  //提交作品按钮
  $('#submit-idea').click(function(){
    var url = "{{ app_url_topic }}/submit?cid={{ dream_category_id }}&ref=dream";
    phenix.redirect(url);
  });

	var s=e(window).width();
	e("#frslide > .ui.slide > .item").width(s);
	
	var $frame = $('#frslide');
	// Call Sly on frame
	$frame.sly({
		horizontal: 1,
		itemNav: 'basic',
		smart: 1,
		activateMiddle: 1,
		activateOn: 'click',
		mouseDragging: 1,
		touchDragging: 1,
		releaseSwing: 1,
		startAt: 0,
		pagesBar: $frame.find('.pages'),
		pageItem: 'pages',
		activatePageOn: 'click',
		pageBuilder: function (index) {
			return '<a href="javascript:void(0);">' + (index + 1) + '</a>';
		},
		speed: 300,
		elasticBounds: 1,
		easing: 'easeOutExpo',
		dragHandle: 1,
		dynamicHandle: 1,
		clickBar: 1,
	});
	
	$(window).resize(function() {
		var s=$(window).width();
		e("#frslide > .ui.slide > .item").width(s);
		
		$frame.sly('reload');
	});
	
{% endblock %}

{% block content %}
<div class="match page">
	{% ad_list var:'ad' page:1 size:5 name:'match_list_slide' %}
	{% if ad.rows %}
	<div id="frslide" class="frame">
		<div class="ui slide">
			{% for ad in ad.rows %}
			<div class="item">
				<a href="{{ ad.view_url }}" title="{{ ad.title }}" target="_blank">
		      		<img src="{{ ad.cover.fileurl }}" class="ui image" alt="{{ ad.title }}" />
				</a>
			</div>
			{% endfor %}
		</div>
		<div class="pages"></div>
	</div>
	{% endif %}
	
	<section class="ui nav responsive grid">
		<div class="middle aligned row">
			<div class="twelve wide column">
				<div class="ui magenta horizontal divided list">
					<a href="{{ app_url_social }}/dream2" class="ui link item">首页</a>
					<a href="{{ app_url_social }}/about2" class="ui link {{ css_index }} item">活动介绍</a>
          <!--<a href="{{ app_url_social }}/dream#judges" class="ui link item">入围作品</a>-->
					<a href="{{ app_url_social }}/allist2" class="ui link {{ css_allist }} item">全部作品</a>
          <!--<a href="{{ app_url_topic }}/c23/" class="ui link item" target="_blank">话题讨论</a>-->
					<a href="{{ app_url_social }}/dream2#coop" class="ui link item" target="_blank">合作资源</a>
				</div>
			</div>
			<div class="right aligned four wide column">
				<a href="javascript:void(0);" id="submit-idea" class="ui btn-4 magenta active btn-4c attend icon-arrow-right btn">
								提交作品
								<i class="icon-arrow-right-sharp"></i>
				</a>
				<!--<a href="javascript:void(0);" class="ui gray btn-4 btn-4c btn">
					提交已结束
				</a>-->
			</div>
		</div>
	</section>
	
	<section class="ui big block">
		<div class="ui responsive grid">
			<div class="row">
				<div class="center aligned column idea section-title">
					<h3 class="ui magenta header">全部作品</h3>
					<hr>
					<p class="ui magenta text">Products</p>
				</div>
			</div>
		</div>
		<div class="ui responsive sort grid">
			<div class="row">
				<div class="center aligned column">
					<div class="ui divided horizontal list">
					  	<div class="item">排序：</div>
					  	<div class="item">
					  		<a href="{{ app_url_social }}/allist?st=4" class="ui {% if st == 4 %}active{% endif %} link">点赞</a>
					  	</div>
					  	<div class="item">
					  		<a href="{{ app_url_social }}/allist?st=5" class="ui {% if st == 5 %}active{% endif %} link">浏览</a>
					  	</div>
					  	<div class="item">
					  		<a href="{{ app_url_social }}/allist?st=2" class="ui {% if st == 2 %}active{% endif %} link">评论</a>
					  	</div>
					  	<div class="item">
					  		<a href="{{ app_url_social }}/allist?st=3" class="ui {% if st == 3 %}active{% endif %} link">收藏</a>
					  	</div>
					  	<div class="item">
					  		<a href="{{ app_url_social }}/allist?st=0" class="ui {% if st == 0 %}active{% endif %} link">时间</a>
					  	</div>
					</div>
				</div>
			</div>
		</div>
		<div class="ui responsive media allist grid">
			<div class="row">
					{% topic_list var:'list' category_id:dream_category_id time:time start_time:start_time end_time:end_time sort:st page:page size:12 %}
			
			<div class="column">
		
				<div class="ui four items">
					{% for topic in list.rows %}
            {% if topic.cover %}
              <div class="item"> 
               <div class="content"> 
                 <h4 class="ui dividing header"> <a class="ui link" href="{{ topic.view_url }}" target="_blank">{{ topic.title|truncate 28 }}</a> 
                 <div class="image"> 
                   <img src="{{ topic.cover.thumbnails.medium.view_url }}" alt="{{ topic.title }}" /> 
                 </div> 
                 <div class="advantage">
                  {{ topic.strip_description|truncate 140 }} 
                 </div> </h4> 
                <div class="i-stats">
                  <div class="schedule"> 
                   <div class="status clearfix"> 
                    <a class="ui avatar image" href="{{ topic.user.home_url }}" target="_blank"> <img src="{{ topic.cover.thumbnails.medium.view_url }}" alt="{{ topic.user.nickname }}" /> </a> 
                    <span class="count"> <a class="ui small link" href="{{ topic.user.home_url }}" target="_blank"> {{ topic.user.nickname }} </a> </span> 
                    <span class="like"> <i class="heart icon"></i> <span class="count">{{ topic.love_count }}</span> <i class="unhide icon"></i> <span class="count">{{ topic.view_count }}</span> </span> 
                   </div> 
                  </div> 
                </div>
               </div> 
              </div>
            {%else%}
              <div class="item"> 
               <div class="content"> 
                <h4 class="ui dividing header"> <a class="ui link" href="{{ topic.view_url }}" target="_blank"> {{ topic.title|truncate 28 }} </a> 
                 <div class="full advantage">
                   {{ topic.strip_description|truncate 580 }} 
                 </div> </h4> 
                <div class="i-stats">
                  <div class="schedule"> 
                   <div class="status clearfix"> 
                    <a class="ui avatar image" href="{{ topic.user.home_url }}" target="_blank"> <img src="{{ topic.cover.thumbnails.medium.view_url }}" alt="{{ topic.view_url }}" /> </a> 
                    <span class="count"> <a class="ui small link" href="{{ topic.user.home_url }}" target="_blank"> {{ topic.user.nickname }} </a> </span> 
                    <span class="like"> <i class="heart icon"></i> <span class="count">{{ topic.love_count }}</span> <i class="unhide icon"></i> <span class="count">{{ topic.view_count }}</span> </span> 
                   </div> 
                  </div> 
                </div>
               </div> 
              </div>
            {%endif%}
          {%endfor%}

				</div>
				  {% if list.total_page %}
					<div class="ui pagination">
						{% pager url:pager_url,total_rows:list.total_rows,total_page:list.total_page,current_page:page,var:'pager',pager_size:9 %}
						{% include 'block/pager.html' %}
					</div>
					{% endif %}
			</div>
		</div>
		
	</section>
	
</div>
{% endblock %}
