{%extends 'layout/h5.html'%}
{% block title %}{% endblock %}
{% block page_css %}
<link rel="stylesheet" href="http://frstatic.qiniudn.com/wechat/js/swiper.min.css">
<style type="text/css">
  #mfrbird{
  	margin:0 auto;
  	max-width:640px;
  }
  html, body { height: 100%; width: 100%; margin: 0px;position:relative;overflow:hidden}
  .page .wrap {
    height:100% !important;
  }
  .hide{ display:none;}

  .page{
  	width:100%;
  	height:100%;
  	position:absolute;
  	font-size:100px;
  	text-align:center;
  	max-width:640px;
  }
  .page-current{
  	z-index:1;
  }
  #music-control {
  	width: 30px;
  	height: 30px;
  	position: fixed;
  	right: 5px;
  	top: 5px;
  	z-index: 9;
  }
  #music-control.playing{
  	-webkit-animation: 2.3s spin linear infinite;
  	animation: 2.3s spin linear infinite;
  }
  @-webkit-keyframes spin {
      0% {
          -webkit-transform: rotateZ(0deg);
      }

      100% {
          -webkit-transform: rotateZ(360deg);
      }
  }
  #loading{
    background: #fff;
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: 9999;
    top: 0;
  }
  .loadbox{
  	display: block;
  	position: relative;
  	width: 100%;
  	height: 100%;
    margin: 0 auto;
  	margin-top: 50%;
  }
  .loadbg{
  	display: block;
  	position: absolute;
  	z-index: 1000;
  	width: 100%;
  	height: 100%;
  	/*background: url({{ app_url_packaged }}/images/promo/jd.gif) no-repeat;*/
  	color:#fff;
  	font-size:18px;
  	text-align:center;
  	background-size: 100%;
  }
  @-webkit-keyframes swipe {
  	0%{-webkit-transform:translateY(40px);opacity:0}
  	60%{-webkit-transform:translateY(12px);opacity:1}
  	100%{-webkit-transform:translateY(0px);opacity:0}
  }
  @-moz-keyframes swipe {
  	0%{-webkit-transform:translateY(40px);opacity:0}
  	60%{-webkit-transform:translateY(12px);opacity:1}
  	100%{-webkit-transform:translateY(0px);opacity:0}
  }
  @keyframes swipe {
  	0%{-webkit-transform:translateY(40px);opacity:0}
  	60%{-webkit-transform:translateY(12px);opacity:1}
  	100%{-webkit-transform:translateY(0px);opacity:0}
  }
  .swipe { 
  	position: absolute; 
  	width: 28px; 
  	height: 16px; 
  	bottom: 45px; 
  	left: 50%; 
  	margin-left: -14px;
  	z-index:4;
  	animation: swipe 1.5s linear infinite;
    -webkit-animation: swipe 1.5s linear infinite; 
  }
  
  
  
  
  .page-1-1,.page-2-1,.page-3-1,.page-3-2,.page-3-3,.page-3-4,.page-3-5{
    background:url({{ app_url_packaged }}/images/promo/d3in/bg1.jpg) no-repeat center center /cover;
  }
  .st{
		position:absolute;
	}
	.pt-1{
	  width:46%;
	  top:15%;
	  left:27%;
	  opacity:0;
	}
	.page-logo{
		-webkit-animation: 0.4s scale-to-zero-with-left cubic-bezier(.17, .67, .11, .93) forwards;
		animation: 0.4s scale-to-zero-with-left cubic-bezier(.17, .67, .11, .93) forwards;
	}
	@-webkit-keyframes scale-to-zero-with-left {
	    0% {
	        -webkit-transform: translate3d(0%, 0, 0) scale(20);
	        opacity: 0;
	    }
	    50% {
	        opacity: 0.3;
	    }
	    100% {
	        -webkit-transform: translate3d(0%, 0, 0) scale(1);
	        opacity: 1;
	    }
	}
  .pt-2{
    width:80%;
    left:10%;
    top:39%;
    opacity:0;
    -webkit-animation-delay: 0.8s;
	  animation-delay: 0.8s;
  }
  .pt-3{
    width:68%;
    left:16%;
    top:47%;
    opacity:0;
    -webkit-animation-delay: 1.2s;
	  animation-delay: 1.2s;
  }
  .pt-4{
    width:28%;
    left:36%;
    top:53%;
    opacity:0;
    -webkit-animation-delay: 1.2s;
	  animation-delay: 1.2s;
  }
  .pt-5{
    width:17%;
    left:41.5%;
    top:85%;
    opacity:0;
    -webkit-animation-delay: 1.8s;
	  animation-delay: 1.8s;
  }
  .pt2-1{
    width:46%;
    left:27%;
    top:5%;
    opacity:0;
  }
  .pt2-2{
    width:100%;
    left:0;
    top:30%;
    opacity:0;
  }
	.tslide{
		width: 100%;
		height: auto;
		overflow: hidden;
		top:30%;
	}
	.tslide .swiper-slide {
		padding:0;
		width:100%;
	}
	.tslide .swiper-slide img{
		width: 76%;
	}
	.tslide .swiper-slide:last-child{
		margin-right:0;
		padding-right:0;
	}
	.pt3-1{
	  width:76%;
	  left:12%;
	  top:30%;
	}
</style>
{% endblock %}

{% block before_layout_js %}
	<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
	<script src="http://frstatic.qiniudn.com/wechat/js/zepto.js"></script>
	<script src="http://frstatic.qiniudn.com/wechat/js/touch.js"></script>
	<script src="http://frstatic.qiniudn.com/wechat/js/swiper.min-1.js" type="text/javascript"></script>
{% endblock %}

{% block layout_js %}
	<script src="http://frstatic.qiniudn.com/wechat/js/audio5.min.js" type="text/javascript"></script>
	<script type="text/javascript" >
		//s=window.innerHeight/500;
		//ss=250*(1-s);
		//$('.wrap').css('-webkit-transform','scale('+s+','+s+') translate(0px,-'+ss+'px)');
    
		(function(){

    var now = { row:1, col:1 }, last = { row:0, col:0};
    const towards = { up:1, right:2, down:3, left:4};
    var isAnimating = false;

    document.addEventListener('touchmove',function(event){
    	event.preventDefault(); },false);

    $(document).swipeUp(function(){
    	if (isAnimating) return;
    	last.row = now.row;
    	last.col = now.col;
    	if (last.row != 5) { now.row = last.row+1; now.col = 1; pageMove(towards.up);}	
    })

    $(document).swipeDown(function(){
    	if (isAnimating) return;
    	last.row = now.row;
    	last.col = now.col;
    	if (last.row!=1) { now.row = last.row-1; now.col = 1; pageMove(towards.down);}	
    })

    $(document).swipeLeft(function(){
    	if (isAnimating) return;
    	last.row = now.row;
    	last.col = now.col;
    	if (last.row !=5) { now.row = last.row+1; now.col = 1; pageMove(towards.left);}	
    })

    $(document).swipeRight(function(){
    	if (isAnimating) return;
    	last.row = now.row;
    	last.col = now.col;
    	if (last.row! =1) { now.row = last.row-1; now.col = 1; pageMove(towards.right);}	
    })

    function pageMove(tw){
    	var lastPage = ".page-"+last.row+"-"+last.col,
    		nowPage = ".page-"+now.row+"-"+now.col;

    	switch(tw) {
    		case towards.up:
    			outClass = 'pt-page-moveToTop';
    			inClass = 'pt-page-moveFromBottom';
    			break;
    		case towards.right:
    			outClass = 'pt-page-moveToRight';
    			inClass = 'pt-page-moveFromLeft';
    			break;
    		case towards.down:
    			outClass = 'pt-page-moveToBottom';
    			inClass = 'pt-page-moveFromTop';
    			break;
    		case towards.left:
    			outClass = 'pt-page-moveToLeft';
    			inClass = 'pt-page-moveFromRight';
    			break;
    	}
    	isAnimating = true;
    	$(nowPage).removeClass("hide");

    	$(lastPage).addClass(outClass);
    	$(nowPage).addClass(inClass);

    	setTimeout(function(){
    		$(lastPage).removeClass('page-current');
    		$(lastPage).removeClass(outClass);
    		$(lastPage).addClass("hide");
    		$(lastPage).find("img").addClass("hide");

    		$(nowPage).addClass('page-current');
    		$(nowPage).removeClass(inClass);
    		$(nowPage).find("img").removeClass("hide");

    		isAnimating = false;
    	},600);
    }

    })();
      
      var mySwiper1 = new Swiper('.swiper-container',{
  		  nextButton: '.swiper-button-next',
        prevButton: '.swiper-button-prev',
        slidesPerView: 1,
        paginationClickable: true,
        loop: true
  	  });
		/*  	bgm = new Audio5js({
		      swf_path: 'http://frstatic.qiniudn.com/wechat/js/audio5js/swf/audio5js.swf',
		      ready: function () {
		          this.load('http://frstatic.qiniudn.com/wechat/js/La1.mp3');
		          this.play();

		          this.on('canplay', function(){

		          });   

		          this.on('ended', function(){
		              bgm.play();
		          })           
		      }
		  });

		  $('#music-control').click(function(){
			    bgm.playPause();
					if($(this).hasClass("playing")){
						$(this).removeClass("playing");
					}
					else{
						$(this).addClass("playing");
					}
			});*/
	</script>
	<script>document.write('<style>#loading{display:none}</style>');</script> 


{% endblock %}

{% block content %}
<div id='loading'><div class="loadbox"><div class="loadbg"></div></div></div>
<div id="music-control" class="playing"><img src="http://frstatic.qiniudn.com/images/music.png" width="29" height="29" /></div>
<div class="page page-1-1 page-current">
	<div class="wrap">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/1.png" class="st pt-1 page-logo">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/2.png" class="st pt-2 page-logo">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/3.png" class="st pt-3 page-logo">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/4.png" class="st pt-4 fadeInUpBig animated">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/5.png" class="st pt-5 page-logo">
	</div>
</div>
<div class="page page-2-1 hide">
	<div class="wrap">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/tit_1.png" class="st pt2-1 page-logo">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/p2_1.png" class="st pt2-2 fadeInUpBig animated">
	</div>
</div>
<div class="page page-3-1 hide">
  <div class="wrap">
    <img src="{{ app_url_packaged }}/images/promo/d3in/tit_2.png" class="st pt2-1 page-logo">
    <img src="{{ app_url_packaged }}/images/promo/d3in/p3_1.png" class="st pt3-1">
  </div>
</div>
<div class="page page-3-2 hide">
  <div class="wrap">
    <img src="{{ app_url_packaged }}/images/promo/d3in/tit_2.png" class="st pt2-1 page-logo">
    <img src="{{ app_url_packaged }}/images/promo/d3in/p3_2.png" class="st pt3-1">
  </div>
</div>
<div class="page page-3-3 hide">
  <div class="wrap">
    <img src="{{ app_url_packaged }}/images/promo/d3in/tit_2.png" class="st pt2-1 page-logo">
    <img src="{{ app_url_packaged }}/images/promo/d3in/p3_3.png" class="st pt3-1">
  </div>
</div>
<div class="page page-3-4 hide">
  <div class="wrap">
    <img src="{{ app_url_packaged }}/images/promo/d3in/tit_2.png" class="st pt2-1 page-logo">
    <img src="{{ app_url_packaged }}/images/promo/d3in/p3_4.png" class="st pt3-1">
  </div>
</div>
<div class="page page-3-5 hide">
  <div class="wrap">
    <img src="{{ app_url_packaged }}/images/promo/d3in/tit_2.png" class="st pt2-1 page-logo">
    <img src="{{ app_url_packaged }}/images/promo/d3in/p3_5.png" class="st pt3-1">
  </div>
</div>






{% endblock %}