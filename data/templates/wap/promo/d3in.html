{%extends 'layout/h5.html'%}
{% block title %}{% endblock %}
{% block page_css %}
<link rel="stylesheet" href="http://frstatic.qiniudn.com/wechat/js/swiper.min.css">
<style type="text/css">
  #mfrbird{
  	margin:0 auto;
  	max-width:640px;
  }
  html, body { height: 100%; width: 100%; margin: 0px;position:relative;overflow:hidden}
  .page .wrap {
    height:100% !important;
  }
  .hide{ display:none;}

  .page{
  	width:100%;
  	height:100%;
  	position:absolute;
  	font-size:100px;
  	text-align:center;
  	max-width:640px;
  }
  .page-current{
  	z-index:1;
  }
  #music-control {
  	width: 30px;
  	height: 30px;
  	position: fixed;
  	right: 5px;
  	top: 5px;
  	z-index: 9;
  }
  #music-control.playing{
  	-webkit-animation: 2.3s spin linear infinite;
  	animation: 2.3s spin linear infinite;
  }
  @-webkit-keyframes spin {
      0% {
          -webkit-transform: rotateZ(0deg);
      }

      100% {
          -webkit-transform: rotateZ(360deg);
      }
  }
  #loading{
    background: #fff;
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: 9999;
    top: 0;
  }
  .loadbox{
  	display: block;
  	position: relative;
  	width: 100%;
  	height: 100%;
    margin: 0 auto;
  	margin-top: 50%;
  }
  .loadbg{
  	display: block;
  	position: absolute;
  	z-index: 1000;
  	width: 100%;
  	height: 100%;
  	/*background: url({{ app_url_packaged }}/images/promo/jd.gif) no-repeat;*/
  	color:#fff;
  	font-size:18px;
  	text-align:center;
  	background-size: 100%;
  }
  @-webkit-keyframes swipe {
  	0%{-webkit-transform:translateY(40px);opacity:0}
  	60%{-webkit-transform:translateY(12px);opacity:1}
  	100%{-webkit-transform:translateY(0px);opacity:0}
  }
  @-moz-keyframes swipe {
  	0%{-webkit-transform:translateY(40px);opacity:0}
  	60%{-webkit-transform:translateY(12px);opacity:1}
  	100%{-webkit-transform:translateY(0px);opacity:0}
  }
  @keyframes swipe {
  	0%{-webkit-transform:translateY(40px);opacity:0}
  	60%{-webkit-transform:translateY(12px);opacity:1}
  	100%{-webkit-transform:translateY(0px);opacity:0}
  }
  .swipe { 
  	position: absolute; 
  	width: 28px; 
  	height: 16px; 
  	bottom: 45px; 
  	left: 50%; 
  	margin-left: -14px;
  	z-index:4;
  	animation: swipe 1.5s linear infinite;
    -webkit-animation: swipe 1.5s linear infinite; 
  }
  
  
  
  
  .page-1-1,.page-2-1,.page-3-1{
    background:url({{ app_url_packaged }}/images/promo/d3in/bg1.jpg) no-repeat center center /cover;
  }
  .st{
		position:absolute;
	}
	.pt-1{
	  width:46%;
	  top:15%;
	  left:27%;
	  opacity:0;
	}
	.page-logo{
		-webkit-animation: 0.4s scale-to-zero-with-left cubic-bezier(.17, .67, .11, .93) forwards;
		animation: 0.4s scale-to-zero-with-left cubic-bezier(.17, .67, .11, .93) forwards;
	}
	@-webkit-keyframes scale-to-zero-with-left {
	    0% {
	        -webkit-transform: translate3d(0%, 0, 0) scale(20);
	        opacity: 0;
	    }
	    50% {
	        opacity: 0.3;
	    }
	    100% {
	        -webkit-transform: translate3d(0%, 0, 0) scale(1);
	        opacity: 1;
	    }
	}
  .pt-2{
    width:80%;
    left:10%;
    top:39%;
    opacity:0;
    -webkit-animation-delay: 0.8s;
	  animation-delay: 0.8s;
  }
  .pt-3{
    width:68%;
    left:16%;
    top:47%;
    opacity:0;
    -webkit-animation-delay: 1.2s;
	  animation-delay: 1.2s;
  }
  .pt-4{
    width:28%;
    left:36%;
    top:53%;
    opacity:0;
    -webkit-animation-delay: 1.2s;
	  animation-delay: 1.2s;
  }
  .pt-5{
    width:17%;
    left:41.5%;
    top:85%;
    opacity:0;
    -webkit-animation-delay: 1.8s;
	  animation-delay: 1.8s;
  }
  .pt2-1{
    width:46%;
    left:27%;
    top:5%;
    opacity:0;
  }
  .pt2-2{
    width:100%;
    left:0;
    top:30%;
    opacity:0;
  }
  .tslide{
		width: 100%;
		height: auto;
		overflow: hidden;
		position:absolute;
		top:30%;
	}
	.tslide .swiper-slide {
		padding:0;
		width:100%;
	}
	.tslide .swiper-slide img{
		width: 76%;
	}
	.tslide .swiper-slide:last-child{
		margin-right:0;
		padding-right:0;
	}
	
	
	#slider-box {
    position: relative;
    width: 100%;
    height: 300px;
    overflow: hidden;
    top:30%;
  }
  #slider {
    height: 100%;
    overflow: hidden;
    -webkit-backface-visibility: hidden;
    -webkit-transform-style: preserve-3d;
  }
  #slider li.active {
    display: block;
    -webkit-animation-name: lightSpeedIn;
    animation-name: lightSpeedIn;
    -webkit-animation-timing-function: ease-out;
    animation-timing-function: ease-out;
    -webkit-animation-duration: 1s;
    animation-duration: 1s;
    -webkit-animation-fill-mode: both;
    animation-fill-mode: both;
  }
  #slider li img {
    width: 76%;
  }
  #slider li {
    width: 100%;
    height: 100%;
    float: left;
    display: none;
  }
  ul, li {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  
</style>
{% endblock %}

{% block before_layout_js %}
	<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
	<script src="http://frstatic.qiniudn.com/wechat/js/zepto.js"></script>
	<script src="http://frstatic.qiniudn.com/wechat/js/touch.js"></script>
	<script src="http://www.17sucai.com/preview/32226/2015-01-06/touchSlider/js/zepto.touchSlider.min.js" type="text/javascript"></script>

	<script type="text/javascript" >

    var m_name = '火眼';
    var img_url = 'http://frstatic.qiniudn.com/images/promo/zp/pin3.jpg';
    var link = '{{ app_url_wap }}/promo/zp';
    var desc_str = '人生是场大设计 www.taihuoniao.com';

    wx.config({
        debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
        appId: '{{ app_id }}', // 必填，公众号的唯一标识
        timestamp: {{ timestamp }}, // 必填，生成签名的时间戳
        nonceStr: '{{ wxnonceStr }}', // 必填，生成签名的随机串
        signature: '{{ wxSha1 }}',// 必填，签名，见附录1
        jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareWeibo', 'hideMenuItems'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
   });

	wx.ready(function(){
    // 2.1 监听“分享给朋友”，按钮点击、自定义分享内容及分享结果接口
     wx.onMenuShareAppMessage({
      title: m_name,
      desc: desc_str,
      link: link,
      imgUrl: img_url,
      success: function (res) {
        record_share_num();
      }
    });      

    // 2.2 监听“分享到朋友圈”按钮点击、自定义分享内容及分享结果接口
    wx.onMenuShareTimeline({
      title: m_name,
      desc: desc_str,
      link: link,
      imgUrl: img_url,
      success: function (res) {
        record_share_num();
      }
    });

    // 2.3 监听“分享到QQ”按钮点击、自定义分享内容及分享结果接口
    wx.onMenuShareQQ({
      title: m_name,
      desc: desc_str,
      link: link,
      imgUrl: img_url,
      success: function (res) {
        record_share_num();
      }
    });

    // 2.4 监听“分享到微博”按钮点击、自定义分享内容及分享结果接口
    wx.onMenuShareWeibo({
      title: m_name,
      desc: desc_str,
      link: link,
      imgUrl: img_url,
      success: function (res) {
        record_share_num();
      }
    });
  });

  //记录分享数
  function record_share_num(){
    var url = '{{ app_url_wap }}/app/site/promo/ajax_stat_sum_record';
    $.get(url, { target_id: 4, count_name:'count', type: 4, kind:4 });
  }

	</script>
{% endblock %}

{% block layout_js %}
	<script src="http://frstatic.qiniudn.com/wechat/js/audio5.min.js" type="text/javascript"></script>
	<script type="text/javascript" >
		//s=window.innerHeight/500;
		//ss=250*(1-s);
		//$('.wrap').css('-webkit-transform','scale('+s+','+s+') translate(0px,-'+ss+'px)');
    /*var mySwiper1 = new Swiper('.swiper-container',{
		  nextButton: '.swiper-button-next',
      prevButton: '.swiper-button-prev',
      slidesPerView: 1,
      paginationClickable: true,
      spaceBetween: 30,
      loop: true,
      autoplay : 3000,
	  });*/
	  
	  $(function(){
    		$('#slider-box').touchSlider();
    	});
    
		var pageIndex = 1,
			pageTotal = $('.page').length,
			towards = { up:1, right:2, down:3, left:4},
			isAnimating = false;
		document.addEventListener('touchmove',function(event){
			event.preventDefault(); },false);

			function pageMove(tw){
				var lastPage;
				if(tw=='1'){
					if(pageIndex==1){
						lastPage = ".page-"+pageTotal+"-1";
					}else{
						lastPage = ".page-"+(pageIndex-1)+"-1";
					}

				}else if(tw=='3'){
					if(pageIndex==pageTotal){
						lastPage = ".page-1"+"-1";
					}else{
						lastPage = ".page-"+(pageIndex+1)+"-1";
					}

				}

				var nowPage = ".page-"+pageIndex+"-1";

				switch(tw) {
					case towards.up:
						outClass = 'pt-page-moveToTop';
						inClass = 'pt-page-moveFromBottom';
						break;
					case towards.down:
						outClass = 'pt-page-moveToBottom';
						inClass = 'pt-page-moveFromTop';
						break;
				}
				isAnimating = true;
				$(nowPage).removeClass("hide");

				$(lastPage).addClass(outClass);
				$(nowPage).addClass(inClass);

				setTimeout(function(){
					$(lastPage).removeClass('page-current');
					$(lastPage).removeClass(outClass);
					$(lastPage).addClass("hide");
					$(lastPage).find("img").addClass("hide");

					$(nowPage).addClass('page-current');
					$(nowPage).removeClass(inClass);
					$(nowPage).find("img").removeClass("hide");

					isAnimating = false;
				},600);
			}

		  $(document).swipeUp(function(){
				if (isAnimating) return;
				if (pageIndex < pageTotal) { 
					pageIndex+=1; 
				}else{
					pageIndex=1;
				};
				pageMove(towards.up);
			});

			$(document).swipeDown(function(){
				if (isAnimating) return;
				if (pageIndex > 1) { 
					pageIndex-=1; 
				}else{
					pageIndex=pageTotal;
				};
				pageMove(towards.down);	
			});

		/*  	bgm = new Audio5js({
		      swf_path: 'http://frstatic.qiniudn.com/wechat/js/audio5js/swf/audio5js.swf',
		      ready: function () {
		          this.load('http://frstatic.qiniudn.com/wechat/js/La1.mp3');
		          this.play();

		          this.on('canplay', function(){

		          });   

		          this.on('ended', function(){
		              bgm.play();
		          })           
		      }
		  });

		  $('#music-control').click(function(){
			    bgm.playPause();
					if($(this).hasClass("playing")){
						$(this).removeClass("playing");
					}
					else{
						$(this).addClass("playing");
					}
			});*/
	</script>
	<script>document.write('<style>#loading{display:none}</style>');</script> 


{% endblock %}

{% block content %}
<div id='loading'><div class="loadbox"><div class="loadbg"></div></div></div>
<div id="music-control" class="playing"><img src="http://frstatic.qiniudn.com/images/music.png" width="29" height="29" /></div>
<div class="page page-1-1 page-current">
	<div class="wrap">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/1.png" class="st pt-1 page-logo">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/2.png" class="st pt-2 page-logo">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/3.png" class="st pt-3 page-logo">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/4.png" class="st pt-4 fadeInUpBig animated">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/5.png" class="st pt-5 page-logo">
	</div>
</div>
<div class="page page-2-1 hide">
	<div class="wrap">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/tit_1.png" class="st pt2-1 page-logo">
	  <img src="{{ app_url_packaged }}/images/promo/d3in/p2_1.png" class="st pt2-2 fadeInUpBig animated">
	</div>
</div>
<div class="page page-3-1 hide">
  <div class="wrap">
    <img src="{{ app_url_packaged }}/images/promo/d3in/tit_2.png" class="st pt2-1 page-logo">
   <!-- <div class="tslide swiper-container">
			<div class="swiper-wrapper">
			  <div class="swiper-slide" >
			  	<img src="{{ app_url_packaged }}/images/promo/d3in/p3_1.png" />
				</div>
				<div class="swiper-slide" >
			  	<img src="{{ app_url_packaged }}/images/promo/d3in/p3_2.png" />
				</div>
				<div class="swiper-slide" >
			  	<img src="{{ app_url_packaged }}/images/promo/d3in/p3_3.png" />
				</div>
				<div class="swiper-slide" >
			  	<img src="{{ app_url_packaged }}/images/promo/d3in/p3_4.png" />
				</div>
				<div class="swiper-slide" >
			  	<img src="{{ app_url_packaged }}/images/promo/d3in/p3_5.png" />
				</div>
			</div>
			<div class="swiper-button-next"></div>
			<div class="swiper-button-prev"></div>
		</div>	 --> 
		
		<div id="slider-box">
		  <ul id="slider">
		    <li class="active">
		      <img src="{{ app_url_packaged }}/images/promo/d3in/p3_1.png" />
		    </li>
		    <li>
		      <img src="{{ app_url_packaged }}/images/promo/d3in/p3_2.png" />
		    </li>
		    <li>
		      <img src="{{ app_url_packaged }}/images/promo/d3in/p3_3.png" />
		    </li>
		    <li>
		      <img src="{{ app_url_packaged }}/images/promo/d3in/p3_4.png" />
		    </li>
		    <li>
		      <img src="{{ app_url_packaged }}/images/promo/d3in/p3_5.png" />
		    </li>
		  
		  </ul>
		</div>
				
    
    
  </div>
</div>







{% endblock %}