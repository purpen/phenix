{%extends 'layout/mobile.html'%}
{% block title%}太火鸟商城-{% endblock %}
{% block page_css %}
<style type="text/css">
  .draw{width:320px; height:320px; position:relative; margin:20px auto;overflow:hidden;}
  #disk{width:320px; height:320px; background:url({{ app_url_packaged }}/images/promo/draw1.png) no-repeat;background-size:cover;}
  #start{width:30%; height:30%; position:absolute; top:35%; left:35%;}
  #start img{cursor:pointer;width:100%}
  .ui.red.button{
    margin:5px;
  }
</style>
{% endblock %}

{% block layout_js %}
  <script type="text/javascript" src="http://frstatic.qiniudn.com/wechat/jsjQueryRotate.2.2.js"></script>
  <script type="text/javascript">
  /*$(function(){
  	$("#startbtn").rotate({
  		bind:{
  			click:function(){
  				var a = Math.floor(Math.random() * 360);
  				 $(this).rotate({
  					 	duration:3000,
  					 	angle: 0, 
              			animateTo:1440+a,
  						easing: $.easing.easeOutSine,
  						callback: function(){
  							alert('中奖了！');
  						}
  				 });
  			}
  		}
  	});
  });*/
  $(function (){

  	var rotateTimeOut = function (){
  		$('#disk').rotate({
  			angle:0,
  			animateTo:2160,
  			duration:8000,
  			callback:function (){
  				alert('网络超时，请检查您的网络设置！');
  			}
  		});
  	};
  	var bRotate = false;

  	var rotateFn = function (awards, angles, txt){
  		bRotate = !bRotate;
  		$('#disk').stopRotate();
  		$('#disk').rotate({
  			angle:0,
  			animateTo:angles+1800,
  			duration:8000,
  			callback:function (){
  			  
  			  $('.ui.drawmes.modal')
          //.modal('setting', 'closable', false)
          .modal('setting', 'transition', 'vertical  flip')
          .modal('show');
  				//alert(txt);
  				bRotate = !bRotate;
  			}
  		})
  	};

  	$('#start').click(function (){

  		if(bRotate)return;
  		
  		var item = rnd(0,7);

  		switch (item) {
  			case 0:
  				//var angle = [26, 88, 137, 185, 235, 287, 337];
  				rotateFn(0, 337, '未中奖');
  				break;
  			case 1:
  				//var angle = [88, 137, 185, 235, 287];
  				rotateFn(1, 26, '免单4999元');
  				break;
  			case 2:
  				//var angle = [137, 185, 235, 287];
  				rotateFn(2, 88, '免单50元');
  				break;
  			case 3:
  				//var angle = [137, 185, 235, 287];
  				rotateFn(3, 137, '免单10元');
  				break;
  			case 4:
  				//var angle = [185, 235, 287];
  				rotateFn(4, 185, '免单5元');
  				break;
  			case 5:
  				//var angle = [185, 235, 287];
  				rotateFn(5, 185, '免单5元');
  				break;
  			case 6:
  				//var angle = [235, 287];
  				rotateFn(6, 235, '免分期服务费');
  				break;
  			case 7:
  				//var angle = [287];
  				rotateFn(7, 287, '提高白条额度');
  				break;
  		}

  		console.log(item);
  	});
  });
  function rnd(n, m){
  	return Math.floor(Math.random()*(m-n+1)+n)
  }
  
  
  </script>

{% endblock %}
{% block content %}
<div class="draw">
  <div id="disk"></div>
  <div id="start"><img src="{{ app_url_packaged }}/images/promo/draw2.png" id="startbtn"></div>
</div>


<!-- 弹出层   -->
<div class="ui drawmes small modal transition">
  <div class="header" style="position:relative;">
	   试用抽奖
	    <i class="close icon" style="right: 0.5em !important;top: 0.5em !important;position:absolute;width: 30px;height: 30px;z-index:3;"></i>
	</div>
  <div class="container">
    <div class="content" style="text-align:center;">
      <p>哎呀，您未中奖，但是20台云马C1试用正在申请中，快快申请吧</p>
      <a class="ui red deny button">
      					分享再玩一次
      </a>
      <br/>
      <a class="ui red deny button">
      					前往兑换中心
      </a>
      <br/>
      <a class="ui red deny button">
      					直接申请云马试用
      </a>
    </div>
      
  </div>
</div>
{% endblock %}
