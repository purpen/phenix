{%extends 'layout/mobile.html'%}
{% block title %}{% endblock %}
{% block page_css %}
<style type="text/css">
	header.ui.wap{
		display:none !important;
		opacity:0;
	}
	#mfrbird{
		margin:0;
	}
	.mmfoot{
		display:none;
	}
	*{
		margin:0;
		padding:0;
	}
	html,body{
		height:100%;
	}
	#loading{
	  background: #fff;
	  width: 100%;
	  height: 100%;
	  position: absolute;
	  z-index: 9999;
	  top: 0;
	}
	.loadbox{
		display: block;
		position: relative;
		width: 100%;
		height: 100%;
	  margin: 0 auto;
		margin-top: 50%;
	}
	.loadbg{
		display: block;
		position: absolute;
		z-index: 1000;
		width: 100%;
		height: 100%;
		/*background: url({{ app_url_packaged }}/images/promo/jd.gif) no-repeat;*/
		color:#fff;
		font-size:18px;
		text-align:center;
		background-size: 100%;
	}
	.swiper-container {
	  /*  width: 320px;
	    height: 480px;*/
		width: 100%;
	  height: 100%;
		background:#fff;
		margin:0 auto;
		position:relative;
		overflow:hidden;
		z-index:1;
	} 
	img{
		display:block;
	}
	@-webkit-keyframes start {
		0%,30% {opacity: 0;-webkit-transform: translate(0,10px);}
		60% {opacity: 1;-webkit-transform: translate(0,0);}
		100% {opacity: 0;-webkit-transform: translate(0,-8px);}
	}
	@-moz-keyframes start {
		0%,30% {opacity: 0;-moz-transform: translate(0,10px);}
		60% {opacity: 1;-moz-transform: translate(0,0);}
		100% {opacity: 0;-moz-transform: translate(0,-8px);}
	}
	@keyframes start {
		0%,30% {opacity: 0;transform: translate(0,10px);}
		60% {opacity: 1;transform: translate(0,0);}
		100% {opacity: 0;transform: translate(0,-8px);}
	}
	#array{
		position:absolute;z-index:999;-webkit-animation: start 1.5s infinite ease-in-out;
		width: 20px;
		height: 15px;
		top: 94%;
		left: 50%;
		margin-left: -10px;
	}
	#music-control {
		width: 30px;
		height: 30px;
		position: fixed;
		right: 5px;
		top: 5px;
		z-index: 100000;
	}
	#music-control.playing{
		-webkit-animation: 2.3s spin linear infinite;
	}
	@-webkit-keyframes spin {
	    0% {
	        -webkit-transform: rotateZ(0deg);
	    }

	    100% {
	        -webkit-transform: rotateZ(360deg);
	    }
	}
	.swiper-slide img{
		width:100%;
		height:100%;
	}
	.swiper-pagination-bullet{
		opacity:0.6 !important;
		background:#fff !important;
	}
	.swiper-pagination-bullet-active {
	  opacity: 1 !important;
	  background: #fff !important;
	}
	#vio {
	  position: absolute;
	  top: 14%;
	  left: 7.5%;
	  z-index: 2;
	  width: 85%;
	}
	
</style>
	<link rel="stylesheet" href="http://frstatic.qiniudn.com/wechat/js/animate.min-1.css">
	<link rel="stylesheet" href="http://frstatic.qiniudn.com/wechat/js/swiper.min.css">
{% endblock %}
{% block layout_js %}
	<script src="http://frstatic.qiniudn.com/wechat/js/swiper.min-1.js" type="text/javascript"></script>
	<script src="http://frstatic.qiniudn.com/wechat/js/swiper.animate.min.js" type="text/javascript"></script>
	<script src="http://frstatic.qiniudn.com/wechat/js/audio5.min.js" type="text/javascript"></script>

	<script type="text/javascript">  
		function fixPagesHeight() {
			$('.swiper-slide,.swiper-container').css({
				height: $(window).height(),
			})
		}
		/*$(window).on('resize', function() {
			fixPagesHeight();
		})*/
		fixPagesHeight();
		var mySwiper = new Swiper ('.swiper-container', {
		   direction : 'vertical',
		  //virtualTranslate : true,
		   mousewheelControl : true,
			 speed : 800,
		   onInit: function(swiper){
		   swiperAnimateCache(swiper);
		   swiperAnimate(swiper);
			  },
		   onSlideChangeEnd: function(swiper){
			swiperAnimate(swiper);
		    },
			onTransitionEnd: function(swiper){
			swiperAnimate(swiper);
		    },


			/*watchSlidesProgress: true,

		      onProgress: function(swiper){
		        for (var i = 0; i < swiper.slides.length; i++){
		          var slide = swiper.slides[i];
		          var progress = slide.progress;
		          var translate = progress*swiper.height/4;  
				  scale = 1 - Math.min(Math.abs(progress * 0.5), 1);
		          var opacity = 1 - Math.min(Math.abs(progress/2),0.5);
		          slide.style.opacity = opacity;
				  es = slide.style;
				  es.webkitTransform = es.MsTransform = es.msTransform = es.MozTransform = es.OTransform = es.transform = 'translate3d(0,'+translate+'px,-'+translate+'px) scaleY(' + scale + ')';

		        }
		      },

			   onSetTransition: function(swiper, speed) {
		        for (var i = 0; i < swiper.slides.length; i++){
		          es = swiper.slides[i].style;
				  es.webkitTransitionDuration = es.MsTransitionDuration = es.msTransitionDuration = es.MozTransitionDuration = es.OTransitionDuration = es.transitionDuration = speed + 'ms';

		        }
		      },*/
			   })
		
	</script> 
	<script>document.write('<style>#loading{display:none}</style>');</script>      
{% endblock %}

{% block jquery %}
	bgm = new Audio5js({
      swf_path: 'http://frstatic.qiniudn.com/wechat/js/audio5js/swf/audio5js.swf',
      ready: function () {
          this.load('http://frstatic.qiniudn.com/wechat/js/5.mp3');
          this.play();

          this.on('canplay', function(){
              //console.log('canplay');
          });   

          this.on('ended', function(){
              bgm.play();
          })           
      }
  });

  $('#music-control').click(function(){
	    bgm.playPause();
			if($(this).hasClass("playing")){
				$(this).removeClass("playing");
				//$('#music-control > img').attr("src","http://frstatic.qiniudn.com/images/music.png"); //关闭
			}
			else{
				$(this).addClass("playing");
				//$('#music-control > img').attr("src","http://frstatic.qiniudn.com/images/music.png"); //打开
			}
	});
	var media = document.getElementById("media"); 
	media.addEventListener("play", function () {
		$('#music-control').removeClass("playing");
		bgm.pause();
	}, false);
	media.addEventListener("pause", function () {
		$('#music-control').addClass("playing");
		bgm.play();
	}, false);
{% endblock %}
{% block content %}
<div id='loading'><div class="loadbox"><div class="loadbg"></div></div></div>
<div id="music-control" class="playing"><img src="http://frstatic.qiniudn.com/images/music.png" width="29" height="29" /></div>
<div class="swiper-container">
  <div class="swiper-wrapper">
		<div class="swiper-slide">
			<img src="http://frstatic.qiniudn.com/images/promo/tu1.jpg">
			
			
			<div id="vio">
				<video id="media" width="100%"  controls="controls" poster="">
				  <source type="video/mp4" src="http://frstatic.qiniudn.com/wechat/js/tun.mp4">
				</video>
			</div>
			
		</div>
		<div class="swiper-slide">
			<img src="http://frstatic.qiniudn.com/images/promo/tu2.jpg">
		</div>
		<div class="swiper-slide">
			<img src="http://frstatic.qiniudn.com/images/promo/tu3.jpg">
		</div>
		<div class="swiper-slide">
			<img src="http://frstatic.qiniudn.com/images/promo/tu4.jpg">
		</div>
		<div class="swiper-slide">
			<img src="http://frstatic.qiniudn.com/images/promo/tu5.jpg">
		</div>
		<div class="swiper-slide">
			<img src="http://frstatic.qiniudn.com/images/promo/tu6.jpg">
		</div>
		<div class="swiper-slide">
			<img src="http://frstatic.qiniudn.com/images/promo/tu7.jpg">
		</div>
		<div class="swiper-slide">
			<img src="http://frstatic.qiniudn.com/images/promo/tu8.jpg">
		</div>
		<div class="swiper-slide">
			<img src="http://frstatic.qiniudn.com/images/promo/tu9.jpg">
		</div>
		<div class="swiper-slide">
			<img src="http://frstatic.qiniudn.com/images/promo/tu10.jpg">
		</div>
		<div class="swiper-slide">
			<img src="http://frstatic.qiniudn.com/images/promo/tu11.jpg">
		</div>
	</div>
	<img src="http://www.swiper.com.cn/demo/tiger/images/arrow.png" id="array">
</div>

{%endblock%}
			
			
			
