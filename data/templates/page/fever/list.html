{%extends 'layout/sns.html'%}
{% block title %}社区-{% endblock %}
{% block page_css %}
<style class="text/css">
.item img {
    display: block;
    transition: transform 0.25s ease-in-out 0s;
}
.item:hover img {
    transform: scale(1.2);
}
.ui.items .item > .image {
	overflow: hidden;
}
.item .hover {
	background-color: rgba(0, 0, 0, 0.1);
    height: 100%;
    left: 0;
    position: absolute;
    top: 0;
    width: 100%;
    z-index: 10;
	border-radius: 0.33em;
	text-align: center;
	
	opacity: 0;
	
    -webkit-transition:
      opacity 0.25s ease,
      background-color 0.25s ease,
      color 0.25s ease,
      background 0.25s ease,
      box-shadow 0.25s ease
    ;
    -moz-transition:
      opacity 0.25s ease,
      background-color 0.25s ease,
      color 0.25s ease,
      background 0.25s ease,
      box-shadow 0.25s ease
    ;
    -o-transition:
      opacity 0.25s ease,
      background-color 0.25s ease,
      color 0.25s ease,
      background 0.25s ease,
      box-shadow 0.25s ease
    ;
    -ms-transition:
      opacity 0.25s ease,
      background-color 0.25s ease,
      color 0.25s ease,
      background 0.25s ease,
      box-shadow 0.25s ease
    ;
    transition:
      opacity 0.25s ease,
      background-color 0.25s ease,
      color 0.25s ease,
      background 0.25s ease,
      box-shadow 0.25s ease
    ;
}

.item:hover .hover {
	background-color: rgba(0, 0, 0, 0.5);
	opacity: 1;
}

.item .circular.ui.icon.button {
    border-color: rgba(255, 255, 255, 0.9);
    color: rgba(255, 255, 255, 0.9);
    margin-top: 30%;
}

.item:hover .circular.ui.icon.button:hover {
    background-color: rgba(255, 255, 255, 1);
	color:#ff3366;
}

.masthead {
    background: url("{{ app_url_packaged }}/images/bg_red.jpg") repeat fixed 0 0 #FF3366;
    border-bottom: medium none;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 0;
    overflow: hidden;
    position: relative;
    text-align: center;
	min-height: 140px;
}
.masthead-cover {
    background-color: rgba(0, 0, 0, 0.7);
}
.masthead .ui.grid > .column {
    margin-bottom: 0;
	margin-top: 0;
}
.masthead .introduction {
    padding: 2.5em 0;
}
.masthead .ui.tabular.menu {
    border-bottom: medium none;
	
}
.masthead .ui.tabular.menu .item {
	color: rgba(255, 255, 255, 0.7);
    font-size: 1.325rem;
}
.masthead .ui.tabular.menu .active.item {
	background-color: #F8F8F8;
	color: rgba(0, 0, 0, 0.7);
}

.masthead-9:before {
    animation-duration: 80s;
    animation-fill-mode: both;
    animation-iteration-count: infinite;
    animation-name: masthead;
    animation-timing-function: linear;
    background: none repeat fixed 0 0 #00B5AD;
    content: "";
    height: 500%;
    left: 0;
    position: absolute;
    top: 0;
    transform-origin: 50% 50% 0;
    width: 500%;
    z-index: 1;
}

@-moz-keyframes masthead {
0% {
    background-position: 0 0;
}
50% {
    background-position: -50% -100%;
}
100% {
    background-position: -100% -200%;
}
}
@-moz-keyframes masthead {
0% {
    background-position: 0 0;
}
50% {
    background-position: -50% -100%;
}
100% {
    background-position: -100% -200%;
}
}

.vote > .ui.timer.list {
    text-align: center;
}
.vote > .ui.timer.list > .item {
    padding: 0.2em 1em;
    line-height: 1em;
}
.vote > .ui.timer.list > .item.green {
    color:#58CB73;
}
.vote > .ui.timer.list > .item > .number {
    margin-bottom: 0.4em;
    font-size: 1.2em;
}
.vote > .ui.timer.list > .item > .unit {
    font-size: 0.875em;
}

</style>
{% endblock %}
{% block js %}
{% endblock %}
{% block jquery %}
	$('[data-countdown]').each(function() {
		var $this = $(this), finalDate = $(this).data('countdown');
		$this.countdown(finalDate, function(event) {
			$this.html(event.strftime('<div class="item"><div class="number">%D</div><div class="unit">天</div></div><div class="item"><div class="number">%H</div><div class="unit">时</div></div> <div class="item"><div class="number">%M</div><div class="unit">分</div></div><div class="green item"><div class="number">%S</div><div class="unit">秒</div></div>'));
		});
	});
{% endblock %}

{% block content %}
<div class="fever">
	{% include "block/social/sub_menu.html" %}
	
	<div class="ui responsive grid">
		<div class="row">
			<div class="ui column">
				
			</div>
		</div>
		<div class="row">
			<div class="twelve wide column">
				<div class="ui top attached novpad header">
					<div class="ui grid">
						<div class="fourteen wide column">
							<div class="ui divided horizontal list">
								<a class="ui {{ css_type_voting }} item link" href="{{ links.voting_url }}">正在投票</a>
								<a class="ui {{ css_type_finishing }} item link" href="{{ links.finishing_url }}">即将结束</a>
							</div>
						</div>
						<div class="right aligned two wide column">
							<a class="ui showbox link" href="#advanced-filter-topic">
								<i class="flat bullet3 icon"></i>
							</a>
						</div>
					</div>
				</div>
				<div class="ui bottom segment attached" id="advanced-filter-topic">
					<div class="row">
						<div class="sixteen wide column">
							<div class="ui horizontal list">
								<label class="item">分类：</label>
								{% category_list var:'category' only_open:only_open domain:domain show_all:1 current:category_id %}
								{% for cat in category.rows %}
							  	<a class="ui {{ cat.active }} item link" href="{{ cat.view_url }}">{{ cat.title }}</a>
								{% endfor %}
							</div>
						</div>
						<div class="sixteen wide column">
							<div class="ui horizontal list">
								<label class="item">排序：</label>
							  	<a class="ui {{ css_sort_latest }} item link" href="{{ links.sort_latest_url }}">最新</a>
							  	<a class="ui {{ css_sort_votest }} item link" href="{{ links.sort_votest_url }}">投票</a>
							  	<a class="ui {{ css_sort_comment }} item link" href="{{ links.sort_comment_url }}">评论</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="four wide column">
				<div class="ui segment">
					<h3 class="ui header">
						<p class="sub header">把你天马行空得创意交给我们，我们一起将它变成现实.</p>
					</h3>
					
			      	<a class="ui fluid magenta button" href="{{ app_url_fever }}/submit">
						<i class="flat add icon"></i> 提交创意
					</a>
				</div>
			</div>
		</div>
		
		<div class="row">
			<div class="ui column">
				<div class="ui four items">
					{% product_list var:'list' page:page category_id:category_id stage:1 only_approved:1 %}
					{% for product in list.rows %}
				  	<div class="item">
				      	<div class="image">
							<a href="{{ product.view_url }}" title="{{ product.title }}">
				          		<img src="{{ product.cover.thumbnails.medium.view_url }}" />
							</a>
				      	</div>
				      	<div class="content">
				          	<div class="name">
								<a href="{{ product.view_url }}" title="{{ product.title }}" class="ui link">
									{{ product.title|truncate, 14, '' }}
								</a>
							</div>
				          	<div class="description">
								{{ product.user.nickname }} {{ product.user.city }}
								<div class="ui divider"></div>
							</div>
							<div class="vote">
								<div class="ui divided horizontal timer list" data-countdown="{{ product.voted_finish_time|date 'Y/m/d H:i:s' }}">
								</div>
							</div>
							
				          	<div class="extra">
				              	{{ product.love_count }} 喜欢
				          	</div>
				      	</div>
				  	</div>
					{% endfor %}
				</div>
			</div>
		</div>
		
		{% if list.rows %}
		<div class="row">
			<div class="ui column">
				<div class="ui pagination">
					{% pager url:pager_url,total_rows:list.total_rows,total_page:list.total_page,current_page:page,var:'pager',pager_size:9 %}
					{%include 'block/pager.html'%}
				</div>
			</div>
		</div>
		{% endif %}
		
	</div><!--end responsive grid-->
</div>
{% endblock %}