{%extends 'layout/column.html'%}
{% block title %}每日签到-{% endblock %}
{% block page_css %}
<style type="text/css">
#sign{
	margin-top: 0;
	padding:0;
	padding-bottom: 2.5rem;
	background:url({{ app_url_packaged }}/images/promo/sign_draw.jpg) no-repeat center center;
	background-size:cover;
	
}
.mainwrap{
	margin-top:0;
}
.mainwrap .mainleft{
	min-height:auto;
}

.six.wide.column p{
	color:#000;
}
#sign .mainwrap .mainleft .ui.grid{
	padding-right: 20px;
	padding-top: 15px;
}
#slidework{
	height:72px;
}
#slidework p{
    font-size: 14px;
	margin-bottom:6px;
	color:#fff;
	overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}
.backg.column {
    background: #ff5044;
    color: #fff;
    padding: 16px 10px 10px 20px !important;
    margin-left: 15px;
	border-radius: 8px;
}
.question,.question:hover{
    color: #fff;
    text-decoration: underline;
}
.help.circle.icon{
	color:#fff;
	font-size: 1.4rem;
	vertical-align: middle;
}
.draw,#disk{
	width: 506px;
	height: 506px;
	position:relative;
}
#disk {
    background: url({{ app_url_packaged }}/images/promo/zzhuan.png) no-repeat;
    background-size: cover;
}
#start {
    width: 130px;
    height: 130px;
    position: absolute;
	top:50%;
	left:50%;
    margin-left: -65px;
    margin-top: -75px;
	cursor: pointer;
}
.mainright .sellwrap.usersign{
	background: rgba(0,0,0,0);
	border:none; 
	margin-top: 10px;
	margin-bottom:0;
	margin-left:-20px;
}
.mainright .sellwrap.usersign .adreg{
	padding: 0 5px;
}
.mainright .sellwrap.usersign .adreg +p{
	margin-top: 10px;
}
.ui.articles.list .item.topicbox h2{
	margin-bottom: 10px !important;
}
.articles h2 a{
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
}
.drawmes.modal{
	background: rgba(0,0,0,0);
}
.drawmes.modal .header{
	background:rgba(0,0,0,0.5);
	border:none;
	color:#fff;
	padding:60px 0 40px;
	font-size:1.5rem;
}
.drawmes.modal .header .content p{
	font-size: 1.6rem;
}
p.nobtn{
	font-size: 14px !important;
    font-weight: 400;
    color: rgba(255,255,255,0.9);
    margin-top: 30px;
    border: 1px solid rgba(255,255,255,0.6) !important;
    display: inline-block;
    padding: 5px 8px;
}
.gettwo.modal{
	border: none;
	box-shadow: none !important;
	background: rgba(0,0,0,0);
}
.gettwo.modal .header{
	background:url({{ app_url_packaged }}/images/promo/zzhuan2.png);
	background-size:100%;
	width:600px !important;
	height:400px !important;
}
.gettwo.modal .header .content p{
	font-size: 1.6rem;
	margin-top:240px;
	color:#fff;
}


</style>
{% endblock %}
{% block layout_js %}
  <script type="text/javascript" src="http://frstatic.qiniudn.com/wechat/jsjQueryRotate.2.2.js"></script>
  
  <script language="javascript">
  window.onload=function(){
    new Marquee(
      "slidework",  //容器ID
      0,  //向上滚动（0为向上、1为向下、2为向左、3为向右)
      2,  //滚动的步长
      268,  //容器可视宽度
      72,  //容器可视高度
      50,  //定时器 数值越小，滚动的速度越快（1000=1秒，建议不小于20）
      2000,  //间歇停顿时间（0为不停顿，1000=1秒）
      1000,  //开始时的等待时间（0为不等待，1000=1秒）
      25  //间歇滚动间距（可选）
      );
    };
	function Marquee()
	{
	    this.ID = document.getElementById(arguments[0]);
	    if(!this.ID)
	    {
	        this.ID = -1;
	        return;
	    }
	    this.Direction = this.Width = this.Height = this.DelayTime = this.WaitTime = this.Correct = this.CTL = this.StartID = this.Stop = this.MouseOver = 0;
	    this.Step = 1;
	    this.Timer = 30;
	    this.DirectionArray = {"top":0 , "bottom":1 , "left":2 , "right":3};
	    if(typeof arguments[1] == "number")    this.Direction = arguments[1];
	    if(typeof arguments[2] == "number")    this.Step = arguments[2];
	    if(typeof arguments[3] == "number")    this.Width = arguments[3];
	    if(typeof arguments[4] == "number")    this.Height = arguments[4];
	    if(typeof arguments[5] == "number")    this.Timer = arguments[5];
	    if(typeof arguments[6] == "number")    this.DelayTime = arguments[6];
	    if(typeof arguments[7] == "number")    this.WaitTime = arguments[7];
	    if(typeof arguments[8] == "number")    this.ScrollStep = arguments[8]    
	    this.ID.style.overflow = this.ID.style.overflowX = this.ID.style.overflowY = "hidden";    
	    this.ID.noWrap = true;
	    this.IsNotOpera = (navigator.userAgent.toLowerCase().indexOf("opera") == -1);
	    if(arguments.length >= 7) this.Start();
	}

	Marquee.prototype.Start = function()
	{
	    if(this.ID == -1)return;
	    if(this.WaitTime < 800)this.WaitTime = 800;
	    if(this.Timer < 20)this.Timer = 20;
	    if(this.Width == 0)this.Width = parseInt(this.ID.style.width);
	    if(this.Height == 0)this.Height = parseInt(this.ID.style.height);
	    if(typeof this.Direction == "string")this.Direction = this.DirectionArray[this.Direction.toString().toLowerCase()];
	    this.HalfWidth = Math.round(this.Width / 2);
	    this.BakStep = this.Step;
	    this.ID.style.width = this.Width+'px';//必须添加‘px’,否则IE外的浏览器不支持
	    this.ID.style.height = this.Height+'px';//
	    if(typeof this.ScrollStep != "number")this.ScrollStep = this.Direction > 1 ? this.Width : this.Height;
	    var msobj = this;
	    var timer = this.Timer;
	    var delaytime = this.DelayTime;
	    var waittime = this.WaitTime;
	    msobj.StartID = function(){msobj.Scroll()}
	    msobj.Continue = function()
	                {
	                    if(msobj.MouseOver == 1)
	                    {
	                        setTimeout(msobj.Continue,delaytime);
	                    }
	                    else
	                    {    clearInterval(msobj.TimerID);
	                        msobj.CTL = msobj.Stop = 0;
	                        msobj.TimerID = setInterval(msobj.StartID,timer);
	                    }
	                }

	    msobj.Pause = function()
	            {
	                msobj.Stop = 1;
	                clearInterval(msobj.TimerID);
	                setTimeout(msobj.Continue,delaytime);
	            }

	    msobj.Begin = function()
	        {
	            msobj.ClientScroll = msobj.Direction > 1 ? msobj.ID.scrollWidth : msobj.ID.scrollHeight;
	            if((msobj.Direction <= 1 && msobj.ClientScroll <msobj.Height) || (msobj.Direction > 1 && msobj.ClientScroll <msobj.Width))return;
	            msobj.ID.innerHTML += msobj.ID.innerHTML;//copy 
	            msobj.TimerID = setInterval(msobj.StartID,timer);
	            if(msobj.ScrollStep < 0)return;
	            msobj.ID.onmousemove = function(event)
	                        {
	                            if(msobj.ScrollStep == 0 && msobj.Direction > 1)
	                            {
	                                var event = event || window.event;
	                                if(window.event)
	                                {
	                                    if(msobj.IsNotOpera)
	                                    {
	                                        msobj.EventLeft = event.srcElement.id == msobj.ID.id ? event.offsetX - msobj.ID.scrollLeft : event.srcElement.offsetLeft - msobj.ID.scrollLeft + event.offsetX;
	                                    }
	                                    else
	                                    {
	                                        msobj.ScrollStep = null;
	                                        return;
	                                    }
	                                }
	                                else
	                                {
	                                    msobj.EventLeft = event.layerX - msobj.ID.scrollLeft;
	                                }
	                                msobj.Direction = msobj.EventLeft > msobj.HalfWidth ? 3 : 2;
	                                msobj.AbsCenter = Math.abs(msobj.HalfWidth - msobj.EventLeft);
	                                msobj.Step = Math.round(msobj.AbsCenter * (msobj.BakStep*2) / msobj.HalfWidth);
	                            }
	                        }
	            msobj.ID.onmouseover = function()
	                        {
	                            if(msobj.ScrollStep == 0)return;
	                            msobj.MouseOver = 1;
	                            clearInterval(msobj.TimerID);
	                        }
	            msobj.ID.onmouseout = function()
	                        {
	                            if(msobj.ScrollStep == 0)
	                            {
	                                if(msobj.Step == 0)msobj.Step = 1;
	                                return;
	                            }
	                            msobj.MouseOver = 0;
	                            if(msobj.Stop == 0)
	                            {
	                                clearInterval(msobj.TimerID);
	                                msobj.TimerID = setInterval(msobj.StartID,timer);
	                            }
	                        }
	        }
	        setTimeout(msobj.Begin,waittime);
	}

	Marquee.prototype.Scroll = function()
	{
	    switch(this.Direction)
	    {
	        case 0:
	            this.CTL += this.Step;
	            if(this.CTL >= this.ScrollStep && this.DelayTime > 0)
	            {
	                this.ID.scrollTop += this.ScrollStep + this.Step - this.CTL;
	                this.Pause();
	                return;
	            }
	            else
	            {
	                if(this.ID.scrollTop >= this.ClientScroll)
	                {
	                    this.ID.scrollTop -= this.ClientScroll;
	                }
	                this.ID.scrollTop += this.Step;
	            }
	        break;

	        case 1:
	            this.CTL += this.Step;
	            if(this.CTL >= this.ScrollStep && this.DelayTime > 0)
	            {
	                this.ID.scrollTop -= this.ScrollStep + this.Step - this.CTL;
	                this.Pause();
	                return;
	            }
	            else
	            {
	                if(this.ID.scrollTop <= 0)
	                {
	                    this.ID.scrollTop += this.ClientScroll;
	                }
	                this.ID.scrollTop -= this.Step;
	            }
	        break;

	        case 2:
	            this.CTL += this.Step;
	            if(this.CTL >= this.ScrollStep && this.DelayTime > 0)
	            {
	                this.ID.scrollLeft += this.ScrollStep + this.Step - this.CTL;
	                this.Pause();
	                return;
	            }
	            else
	            {
	                if(this.ID.scrollLeft >= this.ClientScroll)
	                {
	                    this.ID.scrollLeft -= this.ClientScroll;
	                }
	                this.ID.scrollLeft += this.Step;
	            }
	        break;

	        case 3:
	            this.CTL += this.Step;
	            if(this.CTL >= this.ScrollStep && this.DelayTime > 0)
	            {
	                this.ID.scrollLeft -= this.ScrollStep + this.Step - this.CTL;
	                this.Pause();
	                return;
	            }
	            else
	            {
	                if(this.ID.scrollLeft <= 0)
	                {
	                    this.ID.scrollLeft += this.ClientScroll;
	                }
	                this.ID.scrollLeft -= this.Step;
	            }
	        break;
	    }
	}
  </script>
{% endblock %}
{% block jquery %}
	
	
	$(function(){
		var timeOut = function(){  //超时函数
			$("#disk").rotate({
				angle:0, 
				duration: 10000, 
				animateTo: 2160, //这里是设置请求超时后返回的角度，所以应该还是回到最原始的位置，2160是因为我要让它转6圈，就是360*6得来的
				callback:function(){
					alert('网络超时')
				}
			}); 
		}; 
		var rotateFunc = function(awards,angle,text){  //awards:奖项，angle:奖项对应的角度
			$('#disk').stopRotate();
			$("#disk").rotate({
				angle:0, 
				duration: 5000, 
				animateTo: angle+1440, //angle是图片上各奖项对应的角度，1440是我要让指针旋转4圈。所以最后的结束的角度就是这样子^^
				callback:function(){
					//alert(txt);
				}
			}); 
		};
	
		$("#start").rotate({ 
		   bind: 
			 { 
				click: function(){
					var time = [0,1];
						time = time[Math.floor(Math.random()*time.length)];
					if(time==0){
						timeOut(); //网络超时
					}
					if(time==1){
						var data = [1,2,3,0]; //返回的数组
							data = data[Math.floor(Math.random()*data.length)];
						if(data==1){
							rotateFunc(1,157,'恭喜您抽中的一等奖')
						}
						if(data==2){
							rotateFunc(2,247,'恭喜您抽中的二等奖')
						}
						if(data==3){
							rotateFunc(3,22,'恭喜您抽中的三等奖')
						}
						if(data==0){
							var angle = [67,112,202,292,337];
								angle = angle[Math.floor(Math.random()*angle.length)]
							rotateFunc(0,angle,'很遗憾，这次您未抽中奖')
						}
					}
				}
			 } 
	   
		});
	
	})
	
	
	
	$('#start').click(function(){
		
		$('.coupled.modal')
		.modal({
			allowMultiple: false
		})
		;
		$('.second.gettwo.modal')
		  .modal('attach events', '.clrik.button')
		;
		$('.ui.first.drawmes.modal')
		  .modal('show')
		 ;
		  
	})
	
{% endblock %}
{% block content %}
<div id="sign">
	<div class="mainwrap">
		<div class="mainleftwrap">
			<div class="mainleft">
			
			<div class="ui grid">	
				
				<div class="row" >
					<div class="ui six wide backg column">
						<div id="slidework" style="overflow: hidden;">
							<p>恭喜 action001   获得太火鸟鸟币100枚</p>
							<p>恭喜 action002   获得太火鸟鸟币100枚</p>
							<p>恭喜 action003   获得太火鸟鸟币100枚</p>
						</div>
						
					</div>
				</div>
				
				<div class="row">
					<div class="ui six wide column" style="margin-top:70px;">
						<p>规则</p>
						<p>1.用户必须登录成功后才可参加抽奖活动；</p>
						<p>2.太火鸟社区签到即有1次机会参与抽奖；</p>
						<p>3.连续签到3天以上（含三天）每天有两次
       抽奖机会；</p>
						<p>4.分享此页面可增加一次抽奖机会（每天
       限增加1次）；</p>
						<p>5.活动中奖结果均以弹出页面中奖信息为
       准；</p>
						<p>6.禁止任何不正当手段及舞弊行为参与活
       动，一经发现，太火鸟有权取消用户的
       获奖资格；</p>
						<p>7.本次活动最终解释权归太火鸟所有！</p>
						<p><i class="help circle icon"></i><a class="question" href="" target="_blank"> 我有疑问</a></p>
					</div>
					
					<div class="ui ten wide column">
						<div class="draw">
						  <div id="disk"></div>
						  <div id="start"><img src="{{ app_url_packaged }}/images/promo/zzhuan1.png" width="100%" id="startbtn"></div>
						</div>
						
					</div>
				
				</div>
				
			</div>	

			</div>
		</div>
		<div class="mainright">
			<div class="sellwrap usersign">
				<div id="user-sign-box">
					<div class="reg-border">
					    <a href="javascript:void(0);" class="ui big inverted red active button" style="width: 140px;padding-right: 1em;padding-left: 1em;">
					        <i class="calendar icon"></i> 已签到
					    </a>
						<div class="adreg" style="padding: 0 5px;">	
					      还可抽奖 <b>3</b> 次 
					    </div>
						<p>
						* 今日签到排行: <b style="color:green;">107</b> 
						&nbsp;&nbsp;<a href="/topic/sign"><small>查看排名&gt;&gt;</small></a>
						</p>
					</div>
				</div>
			</div>
			
			{% include "page/topic/right_active.html" %}
			{% include "page/topic/adwrap.html" %}
			
		</div>
		
		
		

	</div>
</div>


<!-- 弹出层   -->
<div class="ui dimmer modals page transition">
	<div class="ui first drawmes coupled small modal transition">
	    <div class="header" style="position:relative;">
	  	    <i class="close icon" style="right: 0.5em !important;top: 0.5em !important;position:absolute;width: 30px;height: 30px;z-index:3;color:#fff;"></i>
			
		    <div class="container">
				<div class="content" style="text-align:center;">
					<p>亲爱的用户 <br>恭喜您获得太火鸟红包一个</p>
					
			        <p class="desc"></p>
			        
			        <a href="javascript:void(0);" class="ui red clrik button">
			        					领取并分享
			        </a>
					
					<br>
					<a href=""><p class="nobtn">不抽奖啦 看看红包能买啥 Go></p></a>
					
			    </div>
      
		    </div>
			
			
	  	</div>
	</div>	

	<div class="ui small second gettwo coupled modal transition hidden">
	    <div class="header" style="position:relative;">
	  	    <i class="close icon" style="right: 0.5em !important;top: 0.5em !important;position:absolute;width: 30px;height: 30px;opacity:0;z-index:3;color:rgba(0,0,0,0);"></i>
			    <div class="container">
					<div class="content" style="text-align:center;">
						
						<p>您已成功领取奖品,请在您账户内查看</p>
					</div>
				</div>
			
		</div>
	</div>
</div>	
	


{% endblock %}