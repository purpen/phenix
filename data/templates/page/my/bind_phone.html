{%extends 'layout/column.html'%}
{% block title %}账号绑定-{% endblock %}
{% block page_css %}
<style class="text/css">
    .account .avatar {
    	min-height: 25em;
    }
</style>
{% endblock %}
{% block js %}
{% endblock %}
{% block jquery %}
    /* 个人资料表单验证 */
	$('#bind-form').form({
		account: {
			identifier  : 'account',
			rules: [
				{
					type   : 'empty',
					prompt : '请填写有效的手机号码'
				},
				{
					type   : 'length[11]',
					prompt : '无效手机号码!'
				}
			]
		}
	}, {
		inline : true,
		onSuccess: function(event){
			event.preventDefault();
			$(this).ajaxSubmit();
		}
	});
{% endblock %}
{% block content %}
<div class="section breadcrumb">
	<div class="ui responsive grid">
		<div class="row">
			<div class="column">
				<div class="ui medium breadcrumb">
				  	<a class="ui section link" href="{{ app_url_domin }}">
						<i class="home icon"></i> 首页
					</a>
                    <i class="angle right icon divider"></i>
				  	<a class="ui section link" href="{{ app_url_my }}">
						个人中心
					</a>
					<i class="angle right icon divider"></i>
					<div class="active section">账号绑定</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="account profile">
	<div class="ui responsive grid">
		<div class="four wide column">
			{% include "block/user/sub_menu_center.html" %}
		</div>
		<div class="twelve wide column">
			<h2 class="ui header">账户信息</h2>
			<div class="ui segment">
				<form action="{{app_url_my}}/save_account" method="post" class="ui fluid form" id="profile-form">
					<input name="_id" type="hidden" value="{{ user_id }}" />
					
					<h3 class="ui dividing header">账号绑定</h3>

          {% if is_bind %}
					<div class="two fields">
						<div class="field">
							<label>手机号</label>
							<input type="text" name="account" />
						</div>
						<div class="field"></div>
					</div>

					<div class="two fields">
            <div class="inline field">
							<label>短信验证码</label>
              <input name="verify_code" type="text" placeholder="短信验证码" id="verify_code" />
              <a href="javascript:void(0);" class="ui grey inverted active button" id="fetch-verify-code">获取验证码</a>
            </div>
						<div class="field"></div>
          </div>

					<div class="two fields">
						<div class="field">
							<label>密码</label>
							<input type="password" name="password" />
						</div>
						<div class="field"></div>
					</div>
					<div class="two fields">
						<div class="field">
							<label>确认密码</label>
							<input type="password" name="repeat_password" />
						</div>
					</div>
					<input type="submit" class="ui inverted magenta button" value="确认绑定" />
          {%else%}
            <div>
              <div class="two fields">
                <div class="field">
                  <label>已绑定的手机号</label>
                  <input type="text" disabled="disabled" name="account" />
                </div>
                <div class="field"></div>
              </div>
            </div>
          {%endif%}
					
				</form>
			</div>
		</div>
	</div>
</div>
{% endblock %}
